<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<meta name="description" content="D7000">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="0">
<title>NETGEAR Router D7000</title>
<link rel="stylesheet" href="style/form.css">
<style type="text/javascript">
	classes.num.all.fontFamily="Courier";
	classes.num.all.fontSize="10pt";
</style>
<script language="javascript" type="text/javascript" src="string.js"></script>
<script language="javascript" type="text/javascript" src="funcs.js"></script>
<script language="javascript" type="text/javascript" src="utility.js"></script>
<script language="javascript" type="text/javascript" src="linux.js"></script>
<script language="javascript" type="text/javascript">
<!--

function setDefs() {
	var cf=document.forms[0], i;
	var nflg=[cf.anc_snrtweak_enable, cf.anc_maxdataratetweak_enable, cf.anc_dslprofile_enable];
	var nflgval=[false, false, false];
	var nvar=[cf.snr, cf.maxdataratedl, cf.maxdatarateul];
	var nval=["", "0", "0"];
	var h_nvar=[cf.h_anc_dslconfprofile, cf.h_bitswap, cf.h_sra, cf.h_trellis, cf.h_sesdrop, cf.h_cominmgn, cf.h_sos, cf.h_dynamicd, cf.h_dynamicf, cf.h_i24k, cf.h_monitortone, cf.h_phyrexmt, cf.h_ginp, cf.h_tpstc, cf.h_profile, cf.h_us0];
	var hnvar=[cf.anc_dslconfprofile, cf.bitswap, cf.sra, cf.trellis, cf.sesdrop, cf.cominmgn, cf.sos, cf.dynamicd, cf.dynamicf, cf.i24k, cf.monitortone, cf.phyrexmt, cf.ginp, cf.tpstc, cf.profile, cf.us0];
	var hnval=["netgear", "on", "on", "on", "off", "off", "on", "on", "off", "on", "on", "1", "3", "14", "17a", "on"];

	for(i=0;i<nflg.length;i++) if(nflg[i].value=="") nflg[i].checked=nflgval[i];
	for(i=0;i<nvar.length;i++) if(nvar[i].value=="") nvar[i].value=nval[i];
	for(i=0;i<h_nvar.length;i++) if(h_nvar[i].value=="") hnvar[i].value=hnval[i];
if(cf.h_wan_dsl_mode.value=="" || (cf.h_wan_dsl_mode.value=="VDSL" && cf.h_wan_traffic_type.value!="ptm")) cf.wan_dsl_mode.value="MMODE";
}

function loadCheck() {
	var cf=document.forms[0], i;
	var data=[cf.anc_dslconfprofile, cf.snr, cf.maxdataratedl, cf.maxdatarateul, cf.wan_dsl_mode];

		if(cf.anc_dslconfprofile.value=="own") allToEnabled(cf);
		else if(cf.anc_dslconfprofile.value=="broadcom") {
		notbuttonToDisabled(cf);
		for(i=0;i<(data.length-1);i++) data[i].disabled=false;
		}
		else {
		notbuttonToDisabled(cf);
		for(i=0;i<data.length;i++) data[i].disabled=false;
		}
}

function dslModeCheck() {
	var cf=document.forms[0];

		if(cf.wan_dsl_mode.value=="VDSL" && cf.h_wan_traffic_type.value!="ptm") {
		cf.wan_dsl_mode.value=cf.h_wan_dsl_mode.value;
		alert("This option can be selected in conjunction with VDSL connection only !");
		return false;
		}
}

function dslDivSetup(dsltype, name) {
	var div_obj=document.getElementById(name);

	((div_obj!=null && "@h_wan_traffic_type#"==dsltype) ? div_obj.style.display="inline" : div_obj.style.display="none");
}

function dslLineSep(dsltype) {

	if("@h_wan_traffic_type#"!=dsltype) return;
	document.write("<tr><td colspan='2' background='liteblue.gif' height='12'></td></tr>");
}

function varInit() {
	var vdslprof=["vdslinfos", "profinfos", "profile_flag", "profile_text", "profile_list", "profile_us0_text", "profile_us0_list", "maxdatarate_flag", "maxdatarate_dl", "maxdatarate_dlval", "maxdatarate_ul", "maxdatarate_ulval"];
	var adslprof=["snr_flag", "snr_var", "snr_val"];

	AncdataToVisible(document.forms[0]);
	for(var i=0;i<vdslprof.length;i++) dslDivSetup("ptm", vdslprof[i]);
	for(i=0;i<adslprof.length;i++) dslDivSetup("atm", adslprof[i]);
	setDefs();
	loadCheck();
}

function showFlags() {
	var val=["bitswap", "sra", "trellis", "sesdrop", "cominmgn", "sos", "dynamicd", "dynamicf", "i24k", "monitortone"];
	var sellink=["bitswap", "seamless-rate-adaptation", "trellis-mode", "sesdrop", "cominmgn", "sos", "dynamicd", "dynamicf", "i24k-interleave-buffer", "monitor-tone"];
	var name=["Bitswap", "Seamless Rate Adaptation", "Trellis Mode", "Sesdrop", "CoMinMgn", "SOS", "DynamicD", "DynamicF", "I24k Interleave Buffer", "Monitor Tone"];
	var def=[1, 1, 1, 0, 0, 1, 1, 0, 1, 1];
	var txt="";

	for(var i=0;i<name.length;i++) {
	txt+="<tr><td align='left'><span><a href='javascript:gotoWiki(\"Dsl-Tweaking#"+sellink[i]+"\");'><b>"+name[i]+"</b></a></span></td>";
	txt+="<td align='right'><select name='"+val[i]+"' size=1>";
	if(def[i]==1) txt+="<option value='on'>On (DEF)</option><option value='off'>Off</option>";
	else txt+="<option value='on'>On</option><option value='off'>Off (DEF)</option>";
	txt+="</select></td></tr>";
	}
	document.write(txt);
}

function checkData() {
	var cf=document.forms[0];
	var msg="";

		if(cf.anc_snrtweak_enable.checked || cf.snr.value!="") {
			if(cf.snr.value[0]=='-') {
			var abssnr=Math.abs(cf.snr.value);
			if(isNaN(abssnr) || abssnr>136) msg+="SNR Ratio is out of range: -136 ~ 250";
			}
			else msg+=checkInt(cf.snr, "SNR Ratio", -136, 250, true);
		}
	msg+=checkBW(cf.maxdataratedl, "Max Data Rate Dwlink", 0, "Kbps", true);
	msg+=checkBW(cf.maxdatarateul, "Max Data Rate Uplink", 0, "Kbps", true);

	if(msg.length>1) {
	alert(msg);
	return false;
	}

	if(!confirm("Warning! Now retraining DSL connection: proceed ?")) return false;
	AncdataToHidden(cf);
	return true;
}

//-->
</script></head>
<body bgcolor="#ffffff" leftmargin="0" marginwidth="0" topmargin="0" marginheight="0" onload="varInit();document.forms[0].elements[0].focus();">
<form name="ssh" method="POST" action="anc.cgi" onSubmit="buttonToDisabled(document.forms[0])">
<div><a class="page_title" href="javascript:gotoWiki('Dsl-Tweaking/');">DSL Tweak</a></div>
<div class="fix_button">
<table border="0" cellpadding="0" cellspacing="2" width="100%"><tr><td nowrap colspan="2" align="center">
<input class="cancel_bt" type="RESET" name="cancel" value="Cancel" onClick="setTimeout('varInit()',250)">
&nbsp;
<input class="common_bt" type="button" value="Show Line Stats" onClick="this.form.pipe_cmd.value='/usr/sbin/xdslctl info --stats';AncstdAction(this.form,'anc_run.htm','anc_dsltweak.htm','pipe','');">
&nbsp;
<div id="vdslinfos"><input class="common_bt" type="button" value="Show VDSL Infos" onClick="this.form.pipe_cmd.value='/usr/sbin/xdslctl info --pbParams';AncstdAction(this.form,'anc_run.htm','anc_dsltweak.htm','pipe','');">
&nbsp;
</div>
<div id="profinfos"><input class="common_bt" type="button" value="Show Profile Infos" onClick="this.form.pipe_cmd.value='/usr/sbin/xdslctl profile --show';AncstdAction(this.form,'anc_run.htm','anc_dsltweak.htm','pipe','');">
&nbsp;
</div>
<input class="apply_bt" type="SUBMIT" name="apply" value="Apply" onClick="return checkData()">
</td></tr></table>
</div>
<div id="main" class="main_top_button">
<table border="0" cellpadding="0" cellspacing="3" width="100%">
<tr><td align="left"><span><a href="javascript:gotoWiki('Dsl-Tweaking#profile-configure-settings');"><b>Select Config Profile</b></a></span></td>
	<td align="right"><select name="anc_dslconfprofile" onChange="loadCheck()" size=1>
		<option value="own">Personal</option>
		<option value="netgear">Netgear (DEF)</option>
		<option value="broadcom">Broadcom</option>
	</select>
</td></tr>
<tr><td colspan="2" background="liteblue.gif" height="12"></td></tr>
<tr><td align="left"><span><a href="javascript:gotoWiki('Dsl-Tweaking#dsl-transmission-mode');"><b>Dsl Transmission Mode</b></a></span></td>
	<td align="right"><select name="wan_dsl_mode" onChange="dslModeCheck()" size=1>
		<option value="MMODE">Auto (DEF)</option>
		<option value="A2PMOD">VDSL2/ADSL2/2+</option>
		<option value="A2MOD">VDSL2/ADSL2</option>
		<option value="GDMT">ADSL(G.dmt)</option>
		<option value="VDSL">VDSL2 Only</option>
	</select>
</td></tr>
<tr><td colspan="2" background="liteblue.gif" height="12"></td></tr>
<script>showFlags()</script>
<tr><td align="left"><span><a href="javascript:gotoWiki('Dsl-Tweaking#phyrexmt');"><b>PhyReXmt</b></a></span></td>
	<td align="right"><select name="phyrexmt" size=1>
		<option value="0">US Off, DS Off</option>
		<option value="1">US Off, DS On (DEF)</option>
		<option value="2">US On, DS Off</option>
		<option value="3">US On, DS On</option>
	</select>
</td></tr>
<tr><td align="left"><span><a href="javascript:gotoWiki('Dsl-Tweaking#ginp');"><b>GinP</b></a></span></td>
	<td align="right"><select name="ginp" size=1>
		<option value="0">US Off, DS Off</option>
		<option value="1">US Off, DS On</option>
		<option value="2">US On, DS Off</option>
		<option value="3">US On, DS On (DEF)</option>
	</select>
</td></tr>
<tr><td align="left"><span><a href="javascript:gotoWiki('Dsl-Tweaking#tpstc');"><b>TpsTc</b></a></span></td>
	<td align="right"><select name="tpstc" size=1>
		<option value="0">Nothing</option>
		<option value="1">Pa</option>
		<option value="2">Aa</option>
		<option value="3">AaPa</option>
		<option value="4">Pv</option>
		<option value="5">PvPa</option>
		<option value="6">PvAa</option>
		<option value="7">PvAaPa</option>
		<option value="8">Av</option>
		<option value="9">AvPa</option>
		<option value="10">AvAa</option>
		<option value="11">AvAaPa</option>
		<option value="12">AvPv</option>
		<option value="13">AvPvPa</option>
		<option value="14">AvPvAa (DEF)</option>
		<option value="15">AvPvAaPa</option>
	</select>
</td></tr>
<tr><td colspan="2" background="liteblue.gif" height="12"></td></tr>
<tr><td nowrap colspan="2"><div id="snr_flag"><input type="checkbox" name="anc_snrtweak_enable" value="@h_anc_snrtweak_enable#"><a href="javascript:gotoWiki('Dsl-Tweaking#signal-noise-ratio');"><b>Turn SNR Tweak On</b></a></div></td></tr>
<tr><td nowrap><div id="snr_var"><a href="javascript:gotoWiki('Dsl-Tweaking#signal-noise-ratio');"><b>Signal Noise Ratio</b></a></div></td>
<td nowrap align="right"><div id="snr_val"><input type="text" class="num" name="snr" value="@snr#" size=6 maxlength=5></div></td></tr>
<script>dslLineSep('atm')</script>
<tr><td nowrap colspan="2"><div id="maxdatarate_flag"><input type="checkbox" name="anc_maxdataratetweak_enable" value="@h_anc_maxdataratetweak_enable#"><a href="javascript:gotoWiki('Dsl-Tweaking#max-data-rate-limiter');"><b>Turn VDSL Data Rate Limiter Tweak On</b></a></div></td></tr>
<tr><td nowrap><div id="maxdatarate_dl"><a href="javascript:gotoWiki('Dsl-Tweaking#max-data-rate-limiter');"><b>Limit Downlink Data Rate to:</b></a></div></td>
<td nowrap align="right"><div id="maxdatarate_dlval"><input type="text" class="num" name="maxdataratedl" value="@maxdataratedl#" size=6 maxlength=6>
&nbsp;<span>Kbps</span></div>
</td></tr>
<tr><td nowrap><div id="maxdatarate_ul"><a href="javascript:gotoWiki('Dsl-Tweaking#max-data-rate-limiter');"><b>Limit Uplink Data Rate to:</b></a></div></td>
<td nowrap align="right"><div id="maxdatarate_ulval"><input type="text" class="num" name="maxdatarateul" value="@maxdatarateul#" size=6 maxlength=6>
&nbsp;<span>Kbps</span></div>
</td></tr>
<script>dslLineSep('ptm')</script>
<tr><td nowrap colspan="2"><div id="profile_flag"><input type="checkbox" name="anc_dslprofile_enable" value="@h_anc_dslprofile_enable#"><a href="javascript:gotoWiki('Dsl-Tweaking#vdsl-profile');"><b>Turn VDSL Profile Tweak On</b></a></div></td></tr>
<tr><td align="left"><div id="profile_text"><span><a href="javascript:gotoWiki('Dsl-Tweaking#vdsl-profile');"><b>VDSL Profile</b></a></span></div></td>
	<td align="right"><div id="profile_list">
	<select name="profile" onChange="if(this.value=='BrcmPriv1') alert('Warning ! This option requires new dsl driver !\n');" size=1>
		<option value="8a">8a</option>
		<option value="8a">8b</option>
		<option value="8c">8c</option>
		<option value="8d">8d</option>
		<option value="12a">12a</option>
		<option value="12b">12b</option>
		<option value="17a">17a (DEF)</option>
		<option value="30a">30a</option>
		<option value="BrcmPriv1">35b</option>
	</select>
	</div></td>
</tr>
<tr><td align="left"><div id="profile_us0_text"><span><a href="javascript:gotoWiki('Dsl-Tweaking#vdsl-profile');"><b>US0</b></a></span></div></td>
	<td align="right"><div id="profile_us0_list"><select name="us0" size=1>
		<option value="on">On (DEF)</option>
		<option value="off">Off</option>
	</select>
</div></td></tr>
<script>dslLineSep('ptm')</script>
</table>
<input type="hidden" name="job" value="save">
<input type="hidden" name="todo" value="/usr/sbin/xdslctl configure">
<input type="hidden" name="next_file" value="anc_dsltweak.htm">
<input type="hidden" name="old_file" value="">
<input type="hidden" name="pipe_cmd" value="">
<input type="hidden" name="h_anc_dslconfprofile" value="@h_anc_dslconfprofile#">
<input type="hidden" name="h_wan_dsl_mode" value="@h_wan_dsl_mode#">
<input type="hidden" name="h_anc_snrtweak_enable" value="@h_anc_snrtweak_enable#">
<input type="hidden" name="h_bitswap" value="@h_bitswap#">
<input type="hidden" name="h_sra" value="@h_sra#">
<input type="hidden" name="h_trellis" value="@h_trellis#">
<input type="hidden" name="h_sesdrop" value="@h_sesdrop#">
<input type="hidden" name="h_cominmgn" value="@h_cominmgn#">
<input type="hidden" name="h_sos" value="@h_sos#">
<input type="hidden" name="h_dynamicd" value="@h_dynamicd#">
<input type="hidden" name="h_dynamicf" value="@h_dynamicf#">
<input type="hidden" name="h_i24k" value="@h_i24k#">
<input type="hidden" name="h_monitortone" value="@h_monitortone#">
<input type="hidden" name="h_phyrexmt" value="@h_phyrexmt#">
<input type="hidden" name="h_ginp" value="@h_ginp#">
<input type="hidden" name="h_tpstc" value="@h_tpstc#">
<input type="hidden" name="h_wan_traffic_type" value="@h_wan_traffic_type#">
<input type="hidden" name="h_anc_maxdataratetweak_enable" value="@h_anc_maxdataratetweak_enable#">
<input type="hidden" name="h_anc_dslprofile_enable" value="@h_anc_dslprofile_enable#">
<input type="hidden" name="h_profile" value="@h_profile#">
<input type="hidden" name="h_us0" value="@h_us0#">
</div>
</form>
<script>printHelp();</script>
</body></html>
